syntax = "proto3";

option go_package = "/in_memory_blockchain";

package proto;

service Blockchain {
    rpc CreateTransaction (TxPayload) returns (Tx) {}
    rpc GetTransactions (QueryParams) returns (TxList) {}
    rpc GetBlock (QueryParams) returns (BlkList) {}
}

message QueryParams {
    optional string blk_hash = 1;
    optional string tx_hash = 2;
    optional int32 range = 3;
}

message TxPayload {
    string from = 1;
    string to = 2;
    float value = 3;
}

message Tx {
    bytes hash = 1;
    string from = 2;
    string to = 3;
    float value = 4;
}

message TxList {
    repeated Tx transactions = 1;
}

message Header {
    bytes hash = 1;
    bytes parent_hash = 2;
    int32 height = 3;
    repeated bytes tx_hashes = 4;
}

message Blk {
    Header header = 1;
    map<string, Tx> transactions =2;
}

message BlkList {
    repeated Blk blocks = 1;
}